# Banjka Overlord Bot

Telegram-–±–æ—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–ø–∏—Å—è–º–∏ –Ω–∞ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ, —Å–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏ –∏ –∑–æ–ª–æ—Ç—ã–º —Å—Ç–∞—Ç—É—Å–æ–º —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏.

## –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –Ω–∞ –∞–∫—Ç–∏–≤–Ω–æ–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ.
- –û—Ç–º–µ–Ω–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫—É –∏–ª–∏ —Å–∏–º–≤–æ–ª `-`.
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –æ–±—ã—á–Ω—ã—Ö –º–µ—Å—Ç –∏ –æ–±—â–µ–≥–æ –ª–∏–º–∏—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏.
- –ü—Ä–∏—Å–≤–æ–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ `–ó–æ–ª–æ—Ç–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è` –ø–æ –ø—Ä–∞–≤–∏–ª–∞–º –≤—Ä–µ–º–µ–Ω–∏ –∏ –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ—Å—Ç–∏.
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ –∫–∞–Ω–∞–ª –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é.
- –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ –õ–° –∑–∞ 1 —á–∞—Å –¥–æ —Å–æ–±—ã—Ç–∏—è (–¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –≤–∫–ª—é—á–µ–Ω–Ω—ã–º —Ñ–ª–∞–≥–æ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π).
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º + –±–ª–æ–∫ –æ —Å–ª–µ–¥—É—é—â–µ–º —Å–æ–±—ã—Ç–∏–∏ –∏ —Ç–µ–∫—É—â–µ–º —Å–ø–∏—Å–∫–µ –∑–∞–ø–∏—Å–∞–Ω–Ω—ã—Ö.
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Å–ª–µ–¥—É—é—â–µ–≥–æ —Å–æ–±—ã—Ç–∏—è –ø–æ –∏–Ω—Ç–µ—Ä–≤–∞–ª—É.

## –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

- `/start` ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É –¥–µ–π—Å—Ç–≤–∏–π.
- `/setdate –î–î.–ú–ú.–ì–ì–ì–ì –ß–ß:–ú–ú –ò–ù–¢–ï–†–í–ê–õ` ‚Äî —Å–æ–∑–¥–∞—Ç—å/–ø–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –∞–∫—Ç–∏–≤–Ω–æ–µ —Å–æ–±—ã—Ç–∏–µ (—Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω).
- `/cancel` ‚Äî –æ—Ç–º–µ–Ω–∏—Ç—å —Ç–µ–∫—É—â–µ–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ (—Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω).

## –ö–Ω–æ–ø–∫–∏ –∏ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –¥–µ–π—Å—Ç–≤–∏—è

- `‚ú® –ó–∞–ø–∏—Å–∞—Ç—å—Å—è` –∏–ª–∏ `+` ‚Äî –∑–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ —Å–æ–±—ã—Ç–∏–µ.
- `‚ûñ –û—Ç–º–µ–Ω–∏—Ç—å –∑–∞–ø–∏—Å—å` –∏–ª–∏ `-` ‚Äî –æ—Ç–º–µ–Ω–∏—Ç—å –∑–∞–ø–∏—Å—å (—Å —É—á–µ—Ç–æ–º –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–æ –≤—Ä–µ–º–µ–Ω–∏).
- `üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞` ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ—Å–µ—â–µ–Ω–∏–π –∏ –±–ª–æ–∫ —Å–ª–µ–¥—É—é—â–µ–≥–æ —Å–æ–±—ã—Ç–∏—è.
- `üîî –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏` ‚Äî –≤–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ –õ–°.

## –ü—Ä–∞–≤–∏–ª–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

- –û–±—ã—á–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –¥–æ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è `MAX_PARTICIPANTS`.
- –û–±—â–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –¥–æ `CLOSE_AT`.
- –ü—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ —Å–≤–µ—Ä—Ö `CLOSE_AT` —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∑–∞–∫—Ä—ã—Ç–∞.
- `–ó–æ–ª–æ—Ç–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è` –≤—ã–¥–∞–µ—Ç—Å—è, –µ—Å–ª–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ö–æ—Ç—è –±—ã –æ–¥–Ω–æ —É—Å–ª–æ–≤–∏–µ:
  - —É–∂–µ –∑–∞–ø–æ–ª–Ω–µ–Ω—ã –æ–±—ã—á–Ω—ã–µ –º–µ—Å—Ç–∞ (`count >= MAX_PARTICIPANTS`),
  - –¥–æ —Å–æ–±—ã—Ç–∏—è –æ—Å—Ç–∞–ª–æ—Å—å –º–µ–Ω—å—à–µ/—Ä–∞–≤–Ω–æ `CANCEL_BEFORE_HOURS`.

## –ü—Ä–∞–≤–∏–ª–∞ –æ—Ç–º–µ–Ω—ã

- –û—Ç–º–µ–Ω–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ —Ç–æ–ª—å–∫–æ –¥–ª—è —É–∂–µ –∑–∞–ø–∏—Å–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
- –û—Ç–º–µ–Ω–∞ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è –∑–∞ `CANCEL_BEFORE_HOURS` –¥–æ –Ω–∞—á–∞–ª–∞ —Å–æ–±—ã—Ç–∏—è.
- –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –æ—Ç–º–µ–Ω—ã –≤ –∫–∞–Ω–∞–ª –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è:
  - –∫—Ç–æ –æ—Ç–º–µ–Ω–∏–ª,
  - –∫–æ–≥–¥–∞ –æ—Ç–º–µ–Ω–∏–ª,
  - –Ω–∞ –∫–∞–∫–æ–µ —Å–æ–±—ã—Ç–∏–µ,
  - —Å–∫–æ–ª—å–∫–æ –º–µ—Å—Ç —Å–≤–æ–±–æ–¥–Ω–æ.

## –ß—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–∞–∑–¥–µ–ª `üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞`

- –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: –ø–æ—Å–µ—â–µ–Ω–∏—è –∏ —á–∏—Å–ª–æ –∑–æ–ª–æ—Ç—ã—Ö —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–π.
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–ª–µ–¥—É—é—â–µ–º —Å–æ–±—ã—Ç–∏–∏:
  - –¥–∞—Ç–∞ –∏ –≤—Ä–µ–º—è,
  - `–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–∞–Ω–Ω—ã—Ö: X/MAX_PARTICIPANTS`,
  - —Å–ø–∏—Å–æ–∫ –∑–∞–ø–∏—Å–∞–Ω–Ω—ã—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤.

## –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

### –í –∫–∞–Ω–∞–ª

- –∑–∞ 3 –¥–Ω—è,
- –∑–∞ 2 –¥–Ω—è (—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –∑–∞–ø–∏—Å–∞–Ω–Ω—ã—Ö –º–µ–Ω—å—à–µ `MAX_PARTICIPANTS`, —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —Å–≤–æ–±–æ–¥–Ω—ã—Ö –º–µ—Å—Ç –∏ —Å–ø–∏—Å–∫–æ–º —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤),
- –∑–∞ 1 –¥–µ–Ω—å (—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –∑–∞–ø–∏—Å–∞–Ω–Ω—ã—Ö –º–µ–Ω—å—à–µ `MAX_PARTICIPANTS`, —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —Å–≤–æ–±–æ–¥–Ω—ã—Ö –º–µ—Å—Ç –∏ —Å–ø–∏—Å–∫–æ–º —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤),
- –∑–∞ 1 —á–∞—Å,
- –∑–∞ 1 –º–∏–Ω—É—Ç—É (—Å–æ —Å–ø–∏—Å–∫–æ–º –∑–æ–ª–æ—Ç—ã—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤).

### –í –ª–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è

- –∑–∞ 1 —á–∞—Å –¥–æ —Å–æ–±—ã—Ç–∏—è, —Ç–æ–ª—å–∫–æ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º —ç—Ç–æ–≥–æ —Å–æ–±—ã—Ç–∏—è —Å `notify_enabled = 1`.

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (`.env`)

- `TELEGRAM_TOKEN` ‚Äî —Ç–æ–∫–µ–Ω Telegram-–±–æ—Ç–∞.
- `CHANNEL_ID` ‚Äî id –∫–∞–Ω–∞–ª–∞/—á–∞—Ç–∞ –¥–ª—è –≥—Ä—É–ø–ø–æ–≤—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π.
- `MAX_PARTICIPANTS` ‚Äî –ª–∏–º–∏—Ç –æ–±—ã—á–Ω—ã—Ö –º–µ—Å—Ç.
- `CLOSE_AT` ‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π (–≤–∫–ª—é—á–∞—è –∑–æ–ª–æ—Ç—ã–µ).
- `CANCEL_BEFORE_HOURS` ‚Äî –ø–æ—Ä–æ–≥ –≤ —á–∞—Å–∞—Ö:
  - –ø–æ—Å–ª–µ –Ω–µ–≥–æ –æ—Ç–º–µ–Ω–∞ –∑–∞–ø—Ä–µ—â–µ–Ω–∞,
  - –ø–æ—Å–ª–µ –Ω–µ–≥–æ –Ω–æ–≤—ã–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–ª—É—á–∞—é—Ç –∑–æ–ª–æ—Ç–æ–π —Å—Ç–∞—Ç—É—Å.
- `PROXY_URL` ‚Äî –ø—Ä–æ–∫—Å–∏ –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤ Telegram API (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ).
- `DATABASE_PATH` ‚Äî –ø—É—Ç—å –∫ SQLite –±–∞–∑–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `banja.db`).
- `LOG_PATH` ‚Äî –ø—É—Ç—å –∫ –ª–æ–≥-—Ñ–∞–π–ª—É (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `bot.log`).

## –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

–ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–∞–±–ª–∏—Ü—ã:

- `events`
- `users`
- `registrations`
- `golden_stats`
- `notification_settings`

–î–ª—è `golden_stats` –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –º–∏–≥—Ä–∞—Ü–∏—è —Å—Ö–µ–º—ã. –°–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è:

- `user_id`
- `event_id`
- `event_date`
- `assigned_at`

## –ó–∞–ø—É—Å–∫

```bash
cd /home/lotohov/docker/banjka_overlord_bot
docker compose up -d --build
```

–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫:

```bash
cd /home/lotohov/docker/banjka_overlord_bot
docker compose restart
```
